generator client {
    provider = "prisma-client-js"
    previewFeatures = ["referentialIntegrity"]
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
    referentialIntegrity = "prisma"
}
model User {
    id          String          @id @default(cuid())
    ci          String          @unique
    name        String          @default("")
    password    String?
    phoneNumber String?
    plans       UserPlan[]
    // access      AccessHistory[]
}
model Plan {
    id         String      @id @default(cuid())
    accessType String      @default("Ilimitado")
    name       String      @unique
    price      Int
    users      UserPlan[]
}

model UserPlan {
    id            String   @id @default(cuid())
    user          User     @relation(fields: [userId], references: [id])
    userId        String
    plan          Plan     @relation(fields: [planId],references: [id])
    planId        String
    startingDate  DateTime
    endingDate    DateTime
    accessHistory AccessHistory[]
}

model AccessHistory {
    id         String   @id @default(cuid())
    // user       User     @relation(fields: [userId], references: [id])
    // userId     String
    userPlan   UserPlan @relation(fields: [userPlanId], references: [id])
    userPlanId String
    date       DateTime
}